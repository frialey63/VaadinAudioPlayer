<link rel="import" href="../bower_components/polymer/polymer-element.html">

<link rel="import" href="../styles/shared-styles.html">

<dom-module id="audio-player">
    <template>
        <style include="shared-styles">
        </style>

        <slot></slot>
    </template>

    <script>
        class AudioPlayerElement extends Polymer.Element {

            constructor() {
                super();
            }

            static get properties() {
                return {};
            }


// TODO: not needed for Flow, remove when migrating
            setServer($server) {
                console.warn('NAP element setServer', $server);
                this.$server = $server;

                $server.onStateChange = function () {
                    console.warn('NAP connector on state change', this.getState());
                };

// /**
//  * Send data from server to client. In other words, the server will
//  * encode a chunk of data as Base64 and then send it to the client side
//  * as the "encodedData" parameter.
//  *
//  * @param chunkId numeric ID of chunk the data belongs to
//  * @param compressed set to true if data should be inflated with zlib after base64 decode
//  * @param encodedData Base64 encoded data
//  */
// void sendData(int chunkId, boolean compressed, String encodedData);
//
// void requestAndCacheAudioChunks(int startTime, int endTime);
//
// void setPlaybackPosition(int position_millis);
//
// void skipPosition(int delta_millis);

                $server.startPlayback = this.startPlayback.bind(this);

                $server.pausePlayback = this.pausePlayback.bind(this);

                $server.resumePlayback = this.resumePlayback.bind(this);

                $server.stopPlayback = this.stopPlayback.bind(this);

// void setPlaybackSpeed(double speed_multiplier);
//
// void setVolume(double volume);
//
// void setVolumeOnChannel(double volume, int channel);
//
// void setBalance(double balance);
//
// void updateEffects(List<SharedEffect> effects);
            }

            startPlayback() {
                console.warn('NAP element startPlayback');
                this.$server.reportPlaybackStarted();
            }

            pausePlayback() {
                console.warn('NAP element pausePlayback');
                this.$server.reportPlaybackPaused();
            }

            resumePlayback() {
                console.warn('NAP element resumePlayback');
                this.$server.reportPlaybackStarted();
            }

            stopPlayback() {
                console.warn('NAP element stopPlayback');
                this.$server.reportPlaybackStopped();
            }

        }
        customElements.define('audio-player', AudioPlayerElement);
    </script>
</dom-module>




